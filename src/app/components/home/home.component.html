<div class="container">
  <div class="chat-container" #scrollMe [scrollTop]="scrollMe.scrollHeight">

    <mat-list *ngFor="let message of messages">
      <mat-list-item class="chat-box">
        <div class="chat-user">
          <img matListAvatar *ngIf="message.action === undefined" [src]="message.from.avatar">

          <div class="chat-user-info">
            <h3 *ngIf="message.action === undefined">{{ message.from.username }}</h3>
            <span>{{ message.time | date:'shortTime' }}</span>
          </div>

        </div>
        <p class="chat-message" *ngIf="message.action === undefined">{{ message.content }}</p>
        <p mat-line *ngIf="message.action === action.JOINED" class="chat-notification">
          <span> <b>{{message.from.username}}</b> joined to the conversation. </span>
        </p>


        <p mat-line *ngIf="message.action === action.RENAME" class="chat-notification">
          <span> <b>{{message.content.previousUsername}}</b> is now <b>{{message.content.username}}</b> </span>
        </p>
      </mat-list-item>
      <mat-divider></mat-divider>
    </mat-list>

    <div class="chat-message-editor">

      <mat-form-field class="chat-message-input">
      <textarea
        matInput
        placeholder="Write message"
        [(ngModel)]="messageContent"
        (keyup.enter)="sendMessage(messageContent)"></textarea>
      </mat-form-field>

    </div>

  </div>

  <aside class="sidebar-right">

    <div class="header">
      <p>Online</p>
    </div>

    <mat-divider></mat-divider>

    <mat-list dense *ngFor="let client of connectedClients">
      <mat-list-item>
        <img matListAvatar src="{{ client?.avatar }}">
        <h3 matLine> {{ client?.username }} </h3>
      </mat-list-item>
      <!--<mat-list-item>
        <img matListAvatar src="https://via.placeholder.com/100x100">
        <h3 matLine> Børge Mogensen </h3>
      </mat-list-item>
      <mat-list-item>
        <img matListAvatar src="https://via.placeholder.com/100x100">
        <h3 matLine> Egon Olsen </h3>
      </mat-list-item>
      <mat-list-item>
        <img matListAvatar src="https://via.placeholder.com/100x100">
        <h3 matLine> Benny Fransen </h3>
      </mat-list-item>-->
    </mat-list>

    <!--<mat-divider></mat-divider>

    <div class="header">
      <p>Offline</p>
    </div>

    <mat-divider></mat-divider>

    <mat-list dense>
      <mat-list-item>
        <img matListAvatar src="https://via.placeholder.com/100x100">
        <h3 matLine> Børge Mogensen </h3>
      </mat-list-item>
      <mat-list-item>
        <img matListAvatar src="https://via.placeholder.com/100x100">
        <h3 matLine> Egon Olsen </h3>
      </mat-list-item>
      <mat-list-item>
        <img matListAvatar src="https://via.placeholder.com/100x100">
        <h3 matLine> Benny Fransen </h3>
      </mat-list-item>
    </mat-list>-->
  </aside>

</div>
